<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Lista de cuentos vía API</title>
</head>
<body>
  <div class="tarjeta">
      <h2>Lista de cuentos vía API</h2>
      <table id="cuentos">
          <tr><th>title</th><th>author</th><th>cost</th><th>description</th><th>image</th></tr>

      </table>
  </div>
  <hr />
  <footer>
    <p>Hecho con Python / Hecho con <3</p>
  </footer>

  <script>

  function createNode(element) {
      return document.createElement(element);
  }

  function append(parent, el) {
    return parent.appendChild(el);
  }

  const table = document.getElementById('cuentos');
  const url = 'http://localhost:9000/cuentos';
  fetch(url).then((resp) => resp.json())
    .then(function(cuentos) {
        return cuentos.map(function(cuento) {
            let tr = createNode('tr');

            let td = createNode('td');
            td.innerHTML = `${cuento.title}`;
            append(tr, td);
            td = createNode('td');
            td.innerHTML = `${cuento.author}`;
            append(tr, td);
            td = createNode('td');
            td.innerHTML = `${cuento.cost}`;
            append(tr, td);
            td = createNode('td');
            td.innerHTML = `${cuento.description}`;
            append(tr, td);
            td = createNode('td');
            td.innerHTML = `${cuento.image}`;
            append(tr, td);

            append(table, tr);
        })
    })
  .catch(function(error) {
    console.log(error);
  });   
  </script>
</body>
</html>
